# TinyRISCV处理器五级流水线实现说明

本处理器实现了RISC-V RV32I指令集的五级流水线，分别为：

1. IF (Instruction Fetch) - 取指令阶段
2. ID (Instruction Decode) - 指令解码阶段
3. EX (Execute) - 执行阶段
4. MEM (Memory) - 访存阶段
5. WB (Write Back) - 写回阶段

## 流水线结构

- `pc_reg.v`: 程序计数器模块，负责生成指令地址
- `if_id.v`: IF/ID流水线寄存器，负责将取指阶段的指令传递给译码阶段
- `id.v`: 译码模块，负责解析指令，读取寄存器值，并处理数据前向通路
- `id_ex.v`: ID/EX流水线寄存器，负责将译码阶段的结果传递给执行阶段
- `ex.v`: 执行模块，负责执行ALU运算和计算跳转地址
- `ex_mem.v`: EX/MEM流水线寄存器，负责将执行阶段的结果传递给访存阶段
- `mem.v`: 访存模块，负责处理访存指令
- `mem_wb.v`: MEM/WB流水线寄存器，负责将访存阶段的结果传递给写回阶段
- `wb.v`: 写回模块，负责将结果写回寄存器

## 数据冒险处理

处理器实现了完整的数据前向通路，解决了数据冒险问题：
- EX -> ID
- MEM -> ID
- WB -> ID

## 控制冒险处理

控制冒险通过以下方式处理：
- 跳转指令在EX阶段确定跳转目标
- 分支预测策略：不预测，直接暂停流水线

## 暂停流水线控制

通过以下信号控制流水线的暂停：
- `Hold_None`: 不暂停
- `Hold_Pc`: 暂停PC，即取指地址不变
- `Hold_If`: 暂停IF阶段及之后的阶段
- `Hold_Id`: 暂停ID阶段及之后的阶段
- `Hold_Ex`: 暂停EX阶段及之后的阶段
- `Hold_Mem`: 暂停MEM阶段及之后的阶段
- `Hold_Wb`: 暂停WB阶段

## 性能特点

五级流水线的实现提高了处理器的吞吐量，在理想情况下(无冒险)，每个时钟周期可以完成一条指令。 